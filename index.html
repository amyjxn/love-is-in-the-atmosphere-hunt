<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Love is in the Atmosphere ‚Äì Chicago Clue Hunt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 1.5rem;
      background: #b0cfe8;
      color: #000;
      font-size: 18px;
    }

    .page { max-width: 800px; margin: 0 auto; }

    h1 {
      font-size: 2rem;
      text-align: center;
      margin-bottom: 0.25rem;
      color: #000;
    }

    .subtitle {
      text-align: center;
      font-size: 1.15rem;
      margin-bottom: 1.5rem;
      color: #000;
    }

    .info {
      font-size: 1.1rem;
      margin-bottom: 1.5rem;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 0.75rem;
      padding: 0.75rem 1rem;
      color: #000;
    }

    .info p { margin: 0 0 0.5rem 0; }

    .info ul, .info ol {
      padding-left: 1.2rem;
      margin: 0.5rem 0 0;
      font-size: 1.1rem;
    }

    .clue {
      background: rgba(0, 0, 0, 0.04);
      border-radius: 0.9rem;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid rgba(0, 0, 0, 0.15);
      font-size: 1.1rem;
    }

    .clue.unlocked {
      border-color: #4ade80;
    }

    .location-label {
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 0.4rem;
      font-weight: bold;
    }

    .clue p {
      margin: 0.25rem 0 0.75rem 0;
      font-size: 1.1rem;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 0.6rem 1.2rem;
      font-size: 1.1rem;
      cursor: pointer;
      background: #ffde63;
      color: #000;
      font-weight: 600;
    }

    .clue-content {
      margin-top: 0.75rem;
      padding-top: 0.75rem;
      border-top: 1px dashed rgba(0, 0, 0, 0.2);
      display: none;
      font-size: 1.1rem;
    }

    .status {
      margin-top: 0.5rem;
      font-size: 1rem;
      color: #444;
    }

    .code-banner {
      display: none;
      margin: 1.5rem 0;
      padding: 1.2rem;
      border-radius: 0.9rem;
      background: #ffde63;
      border: 2px solid #e0b400;
      font-size: 1.1rem;
      color: #000;
      text-align: center;
      box-shadow: 0 0 0 2px rgba(224,180,0,0.4);
    }

    .code-banner strong {
      font-size: 1.25rem;
    }

    .footer {
      margin-top: 2rem;
      font-size: 1rem;
      text-align: center;
      color: #444;
    }
  </style>
</head>

<body>
<div class="page">

  <h1>Love is in the Atmosphere</h1>
  <div class="subtitle">Chicago IRL Clue Hunt</div>

  <div class="info">
    <p><strong>How it works:</strong></p>
    <ul>
      <li>Make sure this page is open in your Internet browser, such as Chrome or Safari.</li>
      <li>Go to any ONE of the locations listed below.</li>
      <li>When you‚Äôre nearby, tap ‚ÄúCheck My Location‚Äù.</li>
      <li>If you‚Äôre close enough, your coupon code will be revealed.  
        The first 10 people to use it will receive a free ticket to <strong>Love Is in the Atmosphere @ Adler Planetarium</strong>‚Äîa cosmic night for Taylor Jenkins Reid fans!
      </li>
    </ul>
  </div>

  <!-- COUPON -->
  <div class="code-banner" id="code-banner">
    üéâ You've received a coupon!<br />
    The first 10 winners to use this code on our Eventbrite page will claim a free ticket.<br /><br />
    Your code is:<br />
    <strong>TJRSUPERFAN</strong>
  </div>

  <!-- CLUE 1 -->
  <section class="clue" id="navyPier">
    <div class="location-label">Clue #1</div>
    <p>Look for the wheel that touches the sky‚Äîthe one you can see from half the city. Your clue is nearby, if you give the area a quick spin...</p>
    <button data-key="navyPier">Check My Location</button>
    <div class="status" id="navyPier-status"></div>
    <div class="clue-content" id="navyPier-content">You're in the right spot for Clue #1!</div>
  </section>

  <!-- CLUE 2 -->
  <section class="clue" id="lincolnParkZoo">
    <div class="location-label">Clue #2</div>
    <p>Growl, roar, chirp, hiss, croak! Stand outside the entrance that shares a name with our governor. Your free ticket is almost in your paws!</p>
    <button data-key="lincolnParkZoo">Check My Location</button>
    <div class="status" id="lincolnParkZoo-status"></div>
    <div class="clue-content" id="lincolnParkZoo-content">You're in the right spot for Clue #2!</div>
  </section>

  <!-- CLUE 3 -->
  <section class="clue" id="cloudGate">
    <div class="location-label">Clue #3</div>
    <p>There's never BEAN a more iconic piece of art! When you spot your reflection, you're in the right place.</p>
    <button data-key="cloudGate">Check My Location</button>
    <div class="status" id="cloudGate-status"></div>
    <div class="clue-content" id="cloudGate-content">You're in the right spot for Clue #3!</div>
  </section>

  <!-- CLUE 4 -->
  <section class="clue" id="chicagoTheatre">
    <div class="location-label">Clue #4</div>
    <p>All the world's a stage! Find the marquee that lights up State Street. When you see the city's name in bright lights, your clue is steps away.</p>
    <button data-key="chicagoTheatre">Check My Location</button>
    <div class="status" id="chicagoTheatre-status"></div>
    <div class="clue-content" id="chicagoTheatre-content">You're in the right spot for Clue #4!</div>
  </section>

  <!-- CLUE 5 -->
  <section class="clue" id="buckingham">
    <div class="location-label">Clue #5</div>
    <p>Is that a whale? No, but it spouts like one! Near this monument in Grant Park, your search comes full circle.</p>
    <button data-key="buckingham">Check My Location</button>
    <div class="status" id="buckingham-status"></div>
    <div class="clue-content" id="buckingham-content">You're in the right spot for Clue #5!</div>
  </section>

  <div class="footer">
    Make sure location services are enabled and try moving closer to each landmark.
  </div>

</div>

<script>
  const locations = {
    navyPier:      { lat: 41.8917, lon: -87.6079, radiusMeters: 110 },
    lincolnParkZoo:{ lat: 41.9209, lon: -87.6323, radiusMeters: 110 },
    cloudGate:     { lat: 41.8826, lon: -87.6233, radiusMeters: 110 },
    chicagoTheatre:{ lat: 41.8854, lon: -87.6278, radiusMeters: 110 },
    buckingham:    { lat: 41.8758, lon: -87.6189, radiusMeters: 110 }
  };

  function getDistanceMeters(lat1, lon1, lat2, lon2) {
    const R = 6371000;
    const toRad = (deg) => deg * Math.PI / 180;
    const phi1 = toRad(lat1);
    const phi2 = toRad(lat2);
    const dPhi = toRad(lat2 - lat1);
    const dLambda = toRad(lon2 - lon1);

    const a =
      Math.sin(dPhi/2) * Math.sin(dPhi/2) +
      Math.cos(phi1) * Math.cos(phi2) *
      Math.sin(dLambda/2) * Math.sin(dLambda/2);

    return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  }

  function formatDistance(meters) {
    const feet = meters * 3.28084;
    if (feet > 1320) {
      return (feet / 5280).toFixed(2) + " miles";
    }
    return Math.round(feet) + " feet";
  }

  function updateStatus(key, msg) {
    const el = document.getElementById(key + "-status");
    if (el) el.textContent = msg;
  }

  function showCodeBanner() {
    document.getElementById("code-banner").style.display = "block";
  }

  function unlockClue(key) {
    document.getElementById(key + "-content").style.display = "block";
    document.getElementById(key).classList.add("unlocked");
    showCodeBanner();
  }

  function checkLocation(key) {
    const loc = locations[key];
    updateStatus(key, "Checking your location (may take up to 30 seconds)...");

    navigator.geolocation.getCurrentPosition(
      (pos) => {
        const meters = getDistanceMeters(
          pos.coords.latitude,
          pos.coords.longitude,
          loc.lat,
          loc.lon
        );

        if (meters <= loc.radiusMeters) {
          unlockClue(key);
          updateStatus(key, "You're close enough! Clue unlocked.");
        } else {
          updateStatus(
            key,
            "You're about " + formatDistance(meters) + " away. Move closer and try again."
          );
        }
      },
      () => updateStatus(
        key,
        "Unable to get your location. Please allow access and try again."
      )
    );
  }

  document.addEventListener("DOMContentLoaded", () => {
    document
      .querySelectorAll("button[data-key]")
      .forEach((btn) =>
        btn.addEventListener("click", () => checkLocation(btn.dataset.key))
      );
  });
</script>

</body>
</html>

